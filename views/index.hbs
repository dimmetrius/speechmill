<h2>Upload your video</h2>
<form id="upload-form" action="/upload" method="POST" enctype="multipart/form-data">
  <h2>Select an video to upload:</h2>
  <div class="upload-container">
    <label for="file-picker" class="btn">Select Video</label>
    <input id="file-picker" type="file" name="image" style="visibility:hidden; width:0px">
  </div>
</form>

<p id="message">{{message}}</p>

<h2>Processed Videos</h2>
{{#each this.thumbnails}}
<a href="/video/{{id}}"><video width="300" height="170"
    poster="https://{{../accountName}}.blob.core.windows.net/transcriptions/stub.jpg"
    src="https://{{../accountName}}.blob.core.windows.net/{{../containerName}}/{{name}}">
  </video></a>
{{/each}}

<script>
  document.addEventListener('DOMContentLoaded', () => {

    const message = document.getElementById('message');
    const picker = document.getElementById('file-picker');

    picker.onchange = function () {
      message.innerText = '';

      if (!picker.files.length) {
        message.innerText = 'Please select an video to upload.';
        e.preventDefault();
        return false;
      }
      document.getElementById("upload-form").submit();
    };

    /*
    document.getElementById('upload-form').addEventListener('submit', (e) => {

      message.innerText = '';

      if (!picker.files.length) {
        message.innerText = 'Please select an video to upload.';
        e.preventDefault();
        return false;
      }
    });
    */

  });
</script>